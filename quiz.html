<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>The Best Friend Synergy Check</title>
  <meta
    name="description"
    content="The Best Friend Synergy Check - a maker-themed DISC compatibility quiz."
  />

  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link
    href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=Outfit:wght@500;600;700;800&display=swap"
    rel="stylesheet"
  />

  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          fontFamily: {
            heading: ["Outfit", "sans-serif"],
            body: ["Inter", "sans-serif"]
          },
          colors: {
            makerSky: "#0ea5e9",
            makerViolet: "#8b5cf6",
            makerAmber: "#f59e0b",
            makerPaper: "#fafafa"
          },
          boxShadow: {
            glowSky: "0 20px 40px -24px rgba(14,165,233,0.7)",
            glowViolet: "0 20px 40px -24px rgba(139,92,246,0.7)",
            glowAmber: "0 20px 40px -24px rgba(245,158,11,0.7)"
          },
          keyframes: {
            floatBlob: {
              "0%, 100%": { transform: "translateY(0px) translateX(0px)" },
              "50%": { transform: "translateY(-14px) translateX(6px)" }
            }
          },
          animation: {
            blobSlow: "floatBlob 18s ease-in-out infinite",
            blobMid: "floatBlob 14s ease-in-out infinite",
            blobFast: "floatBlob 11s ease-in-out infinite"
          }
        }
      }
    };
  </script>
  <style>
    @keyframes orbital-flow {
      0% { background-position: 0% 50%; }
      100% { background-position: 200% 50%; }
    }

    .animate-orbital {
      background: linear-gradient(to right, #0ea5e9, #8b5cf6, #f59e0b, #0ea5e9);
      background-size: 200% auto;
      animation: orbital-flow 6s linear infinite;
    }
  </style>
</head>
<body class="relative min-h-screen overflow-x-hidden bg-makerPaper font-body text-slate-900 antialiased">
  <div aria-hidden="true" class="pointer-events-none absolute inset-0 z-0">
    <div class="absolute -top-40 left-[-8rem] h-[28rem] w-[28rem] rounded-full bg-sky-200/40 blur-3xl animate-blobSlow"></div>
    <div class="absolute top-[30%] right-[-10rem] h-[32rem] w-[32rem] rounded-full bg-violet-200/40 blur-3xl animate-blobMid"></div>
    <div class="absolute bottom-[-10rem] left-[20%] h-[24rem] w-[24rem] rounded-full bg-amber-200/40 blur-3xl animate-blobFast"></div>
  </div>

  <div id="legacy-layer" aria-hidden="true" class="pointer-events-none fixed inset-0 z-[1] overflow-hidden">
    <img src="assets/drawing-dragon.png" alt="" class="absolute left-[5%] top-[4%] w-[32vw] min-w-[220px] max-w-[420px] -rotate-6 opacity-[0.11]" style="filter: grayscale(10%) saturate(120%);" />
    <img src="assets/drawing-dino.png" alt="" class="absolute right-[4%] top-[20%] w-[24vw] min-w-[170px] max-w-[320px] rotate-6 opacity-[0.1]" style="filter: grayscale(10%) saturate(120%);" />
    <img src="assets/drawing-cat.png" alt="" class="absolute left-[8%] w-[24vw] min-w-[170px] max-w-[300px] rotate-3 opacity-[0.12]" style="bottom: calc(5%); filter: grayscale(10%) saturate(120%);" />
    <img src="assets/drawing-sun.png" alt="" class="absolute bottom-[8%] right-[8%] w-[20vw] min-w-[150px] max-w-[250px] -rotate-3 opacity-[0.11]" style="filter: grayscale(10%) saturate(120%);" />
  </div>

  <main class="relative z-10 mx-auto max-w-3xl px-5 pb-16 pt-12 md:px-10 md:pt-16">
    <section class="level-up rounded-3xl border border-white/70 bg-white/70 p-7 shadow-xl backdrop-blur-xl md:p-10">
      <p class="text-xs font-bold uppercase tracking-[0.15em] text-makerViolet">Compatibility Quest</p>
      <h1 class="mt-3 font-heading text-3xl font-extrabold leading-tight text-slate-900 md:text-5xl">
        The Best Friend Synergy Check
      </h1>
      <p class="mt-4 max-w-2xl text-sm leading-relaxed text-slate-600 md:text-base">
        A maker-themed DISC assessment to see how your collaboration style pairs with Tyler's operating mode.
      </p>

      <div class="mt-7">
        <div class="flex items-center justify-between text-[11px] font-semibold uppercase tracking-wide text-slate-500">
          <span id="progress-label">Question 1 of 10</span>
          <span id="progress-value">10%</span>
        </div>
        <div class="mt-2 h-2.5 overflow-hidden rounded-full bg-slate-200/80">
          <div id="progress-bar" class="h-full w-[10%] rounded-full bg-gradient-to-r from-cyan-500 via-sky-500 to-violet-500 transition-all duration-300"></div>
        </div>
      </div>

      <form id="quiz-form" class="mt-8 space-y-6" aria-label="The Best Friend Synergy Check">
        <div class="rounded-2xl p-[1.5px] animate-orbital shadow-glowSky">
          <div id="question-card" class="rounded-2xl border border-white/70 bg-white/75 p-6 shadow-glowSky backdrop-blur-md transition-all duration-300 ease-out">
            <p class="text-xs font-bold uppercase tracking-[0.15em] text-makerSky">Maker Prompt</p>
            <h2 id="question-text" class="mt-3 font-heading text-2xl font-bold text-slate-900"></h2>
            <div id="answers" class="mt-5 space-y-3"></div>
          </div>
        </div>

        <div class="flex items-center justify-between gap-3">
          <button
            type="button"
            id="prev-btn"
            class="rounded-2xl border border-slate-200 bg-white/90 px-4 py-2.5 text-sm font-semibold text-slate-700 transition-all duration-300 ease-out hover:-translate-y-0.5 hover:shadow-lg disabled:cursor-not-allowed disabled:opacity-40"
          >
            Previous
          </button>
          <button
            type="button"
            id="next-btn"
            class="rounded-2xl bg-gradient-to-r from-cyan-500 to-violet-500 px-5 py-2.5 font-heading text-sm font-bold text-white shadow-lg shadow-violet-200 transition-all duration-300 ease-out hover:-translate-y-0.5 hover:brightness-105"
          >
            Next Prompt
          </button>
        </div>
      </form>
      <div id="sync-status" class="mt-4 hidden rounded-xl border border-violet-200 bg-white/85 px-4 py-3 text-center text-xs font-bold uppercase tracking-[0.15em] text-makerViolet opacity-0 transition-opacity duration-300">
        Syncing Operating Modes...
      </div>

      <section id="results" class="mt-8 hidden rounded-2xl border border-white/70 bg-white/75 p-6 shadow-xl backdrop-blur-md transition-all duration-500 ease-out">
        <p class="text-xs font-bold uppercase tracking-[0.15em] text-makerAmber">Result Screen</p>
        <h2 class="mt-2 font-heading text-3xl font-bold text-slate-900">Synergy Report</h2>

        <div class="mt-5 grid gap-4 md:grid-cols-2">
          <article class="rounded-2xl border border-sky-100 bg-sky-50/70 p-4">
            <p class="text-xs font-bold uppercase tracking-wide text-makerSky">Compatibility Percentage</p>
            <p id="compatibility" class="mt-2 font-heading text-4xl font-extrabold text-slate-900">0%</p>
          </article>
          <article class="rounded-2xl border border-violet-100 bg-violet-50/70 p-4">
            <p class="text-xs font-bold uppercase tracking-wide text-makerViolet">Party Role</p>
            <p id="party-role" class="mt-2 font-heading text-2xl font-bold text-slate-900">-</p>
          </article>
        </div>

        <p id="role-detail" class="mt-5 text-sm leading-relaxed text-slate-600"></p>

        <div id="disc-bars" class="mt-6 space-y-3"></div>

        <button
          type="button"
          id="retake-btn"
          class="mt-6 rounded-2xl border border-slate-200 bg-white/90 px-4 py-2.5 text-sm font-semibold text-slate-700 transition-all duration-300 ease-out hover:-translate-y-0.5 hover:shadow-lg"
        >
          Retake Check
        </button>
      </section>

      <a
        href="index.html"
        class="mt-8 inline-flex rounded-2xl border border-slate-200 bg-white/90 px-4 py-2.5 text-sm font-semibold text-slate-700 transition-all duration-300 ease-out hover:-translate-y-0.5 hover:shadow-lg"
      >
        Back to Mission Control
      </a>
    </section>
  </main>

  <script>
    const questions = [
      {
        prompt: "A 3D print fails at 90%. Your first move?",
        options: [
          { text: "Restart immediately with a better plan.", trait: "D" },
          { text: "Laugh, post the fail, and ask for tips.", trait: "I" },
          { text: "Try to save it and keep the build steady.", trait: "S" },
          { text: "Analyze the G-code to find the error.", trait: "C" }
        ]
      },
      {
        prompt: "You just arrived at Universal. Which ride first?",
        options: [
          { text: "VelociCoaster—straight to the thrills.", trait: "D" },
          { text: "Hagrid's—fun vibes with the group.", trait: "I" },
          { text: "E.T. Adventure—keep it classic and steady.", trait: "S" },
          { text: "Bourne Stuntacular—checking the tech.", trait: "C" }
        ]
      },
      {
        prompt: "Your D&D party hits a locked door. You:",
        options: [
          { text: "Kick it down and lead the charge.", trait: "D" },
          { text: "Try to talk the guard into opening it.", trait: "I" },
          { text: "Wait for the group to decide together.", trait: "S" },
          { text: "Search for a hidden mechanism or key.", trait: "C" }
        ]
      },
      {
        prompt: "A project deadline is tomorrow. You:",
        options: [
          { text: "Cut the noise and drive to the finish.", trait: "D" },
          { text: "Get the team hyped for a final push.", trait: "I" },
          { text: "Check in to see who needs help.", trait: "S" },
          { text: "Double-check the data for any gaps.", trait: "C" }
        ]
      },
      {
        prompt: "Designing a new Disney attraction. Focus on:",
        options: [
          { text: "High-speed thrills and impact.", trait: "D" },
          { text: "Immersive story and guest joy.", trait: "I" },
          { text: "Reliable systems and safety.", trait: "S" },
          { text: "Complex engineering and precision.", trait: "C" }
        ]
      },
      {
        prompt: "Surprise holiday! Work is officially off. You:",
        options: [
          { text: "Head out for an intense hike.", trait: "D" },
          { text: "Hit the beach with a group of friends.", trait: "I" },
          { text: "Catch a movie and actually relax.", trait: "S" },
          { text: "Grind some games or optimize your PC.", trait: "C" }
        ]
      },
      {
        prompt: "A teammate misses a deadline. Your style:",
        options: [
          { text: "Assign a new owner and move on.", trait: "D" },
          { text: "Talk it out and keep things positive.", trait: "I" },
          { text: "Offer support to help them catch up.", trait: "S" },
          { text: "Update the process to prevent it next time.", trait: "C" }
        ]
      },
      {
        prompt: "Your home workspace vibe is:",
        options: [
          { text: "Mission-ready and efficient.", trait: "D" },
          { text: "Creative and full of inspiration.", trait: "I" },
          { text: "Comfortable and very consistent.", trait: "S" },
          { text: "Organized and perfectly optimized.", trait: "C" }
        ]
      },
      {
        prompt: "When combat starts in D&D, you are the:",
        options: [
          { text: "Front-line Fighter calling the shots.", trait: "D" },
          { text: "Bard keeping the energy high.", trait: "I" },
          { text: "Cleric making sure everyone is safe.", trait: "S" },
          { text: "Wizard tracking every spell and slot.", trait: "C" }
        ]
      },
      {
        prompt: "Success is best when:",
        options: [
          { text: "The mission is 100% complete.", trait: "D" },
          { text: "The whole team is celebrating.", trait: "I" },
          { text: "The progress was smooth and steady.", trait: "S" },
          { text: "The system worked perfectly.", trait: "C" }
        ]
      }
    ];

    const tylerProfile = { D: 0.36, I: 0.2, S: 0.08, C: 0.36 };
    const traitLabels = { D: "Dominance", I: "Influence", S: "Steadiness", C: "Conscientiousness" };
    const traitColors = { D: "bg-makerAmber", I: "bg-makerViolet", S: "bg-sky-400", C: "bg-makerSky" };

    let current = 0;
    let answers = new Array(questions.length).fill(null);

    const progressLabel = document.getElementById("progress-label");
    const progressValue = document.getElementById("progress-value");
    const progressBar = document.getElementById("progress-bar");
    const questionCard = document.getElementById("question-card");
    const questionText = document.getElementById("question-text");
    const answersWrap = document.getElementById("answers");
    const prevBtn = document.getElementById("prev-btn");
    const nextBtn = document.getElementById("next-btn");
    const quizForm = document.getElementById("quiz-form");
    const syncStatus = document.getElementById("sync-status");
    const scanLine = document.getElementById("scan-line");
    const results = document.getElementById("results");
    const compatibilityEl = document.getElementById("compatibility");
    const roleEl = document.getElementById("party-role");
    const roleDetailEl = document.getElementById("role-detail");
    const discBars = document.getElementById("disc-bars");
    const retakeBtn = document.getElementById("retake-btn");
    const SCAN_DURATION_MS = 600;
    const RESULT_SYNC_MS = 1500;
    let transitionBusy = false;

    function renderQuestion() {
      const q = questions[current];
      questionText.textContent = q.prompt;

      const pct = Math.round(((current + 1) / questions.length) * 100);
      progressLabel.textContent = `Question ${current + 1} of ${questions.length}`;
      progressValue.textContent = `${pct}%`;
      progressBar.style.width = `${pct}%`;

      answersWrap.innerHTML = "";
      q.options.forEach((opt, idx) => {
        const checked = answers[current] === idx ? "checked" : "";
        const option = document.createElement("label");
        option.className =
          "group flex cursor-pointer items-start gap-3 rounded-xl border border-slate-200 bg-white/90 p-3 text-sm text-slate-700 transition-all duration-300 ease-out hover:-translate-y-0.5 hover:shadow-md has-[:checked]:border-sky-300 has-[:checked]:bg-sky-50/70";
        option.innerHTML = `
          <input type="radio" name="q-${current}" value="${idx}" class="mt-0.5 h-4 w-4 border-slate-300 text-sky-500 focus:ring-sky-200" ${checked} />
          <span>${opt.text}</span>
        `;
        answersWrap.appendChild(option);
      });

      prevBtn.disabled = current === 0;
      nextBtn.disabled = false;
      nextBtn.textContent = current === questions.length - 1 ? "Calculate Synergy" : "Next Prompt";
    }

    function calculateResults(holdReveal = false) {
      const counts = { D: 0, I: 0, S: 0, C: 0 };
      answers.forEach((choice, idx) => {
        const trait = questions[idx].options[choice].trait;
        counts[trait] += 1;
      });

      const total = questions.length;
      const userProfile = {
        D: counts.D / total,
        I: counts.I / total,
        S: counts.S / total,
        C: counts.C / total
      };

      const distance =
        Math.abs(userProfile.D - tylerProfile.D) +
        Math.abs(userProfile.I - tylerProfile.I) +
        Math.abs(userProfile.S - tylerProfile.S) +
        Math.abs(userProfile.C - tylerProfile.C);
      const compatibility = Math.max(0, Math.min(100, Math.round((1 - distance / 2) * 100)));

      const sorted = Object.entries(counts).sort((a, b) => b[1] - a[1]);
      const topTrait = sorted[0][0];
      const secondTrait = sorted[1][0];

      let role = "The Creative Enabler";
      let roleDetail = "You bring energy and adaptability, helping ideas move from rough concept to useful output.";

      if (topTrait === "D" && secondTrait === "C") {
        role = "The Lead Architect";
        roleDetail = "You align naturally with Tyler's mission-first planning style: decisive direction, tight systems, and high execution standards.";
      } else if (topTrait === "C") {
        role = "The Systems Strategist";
        roleDetail = "You reinforce quality and reliability, making the collaboration strong on risk control, structure, and delivery clarity.";
      } else if (topTrait === "D") {
        role = "The Momentum Driver";
        roleDetail = "You add pace and urgency, helping plans convert to action quickly while Tyler anchors system discipline.";
      } else if (topTrait === "I") {
        role = "The Creative Enabler";
        roleDetail = "You elevate morale, communication, and idea flow, balancing Tyler's technical intensity with social momentum.";
      } else if (topTrait === "S") {
        role = "The Stability Anchor";
        roleDetail = "You create consistency and trust, which strengthens long-range execution across maker projects and strategic goals.";
      }

      compatibilityEl.textContent = `${compatibility}%`;
      roleEl.textContent = role;
      roleDetailEl.textContent = roleDetail;

      discBars.innerHTML = "";
      ["D", "I", "S", "C"].forEach((trait) => {
        const value = Math.round(userProfile[trait] * 100);
        const row = document.createElement("div");
        row.className = "space-y-1";
        row.innerHTML = `
          <div class="flex items-center justify-between text-xs font-semibold uppercase tracking-wide text-slate-500">
            <span>${traitLabels[trait]}</span>
            <span>${value}%</span>
          </div>
          <div class="h-2.5 overflow-hidden rounded-full bg-slate-200/80">
            <div class="h-full ${traitColors[trait]} transition-all duration-500" style="width: ${value}%"></div>
          </div>
        `;
        discBars.appendChild(row);
      });

      if (holdReveal) {
        return;
      }

      quizForm.classList.add("hidden");
      results.classList.remove("hidden");
      progressLabel.textContent = "Assessment Complete";
      progressValue.textContent = "100%";
      progressBar.style.width = "100%";
    }


    function runQuestionTransition(nextIndex) {
      transitionBusy = true;
      prevBtn.disabled = true;
      nextBtn.disabled = true;

      questionCard.classList.add("opacity-0", "scale-95");

      setTimeout(() => {
        requestAnimationFrame(() => {
          current = nextIndex;
          renderQuestion();
        });
      }, SCAN_DURATION_MS / 2);

      setTimeout(() => {
        questionCard.classList.remove("opacity-0", "scale-95");
        transitionBusy = false;
      }, SCAN_DURATION_MS + 40);
    }

    function runResultsTransition() {
      transitionBusy = true;
      prevBtn.disabled = true;
      nextBtn.disabled = true;

      questionCard.classList.add("opacity-0", "scale-95");

      setTimeout(() => {
        requestAnimationFrame(() => {
          calculateResults(true);
          syncStatus.classList.remove("hidden");
          requestAnimationFrame(() => {
            syncStatus.classList.add("opacity-100");
          });
        });
      }, SCAN_DURATION_MS / 2);

      setTimeout(() => {
        syncStatus.classList.remove("opacity-100");
        quizForm.classList.add("hidden");
        syncStatus.classList.add("hidden");
        results.classList.remove("hidden");
        results.classList.add("opacity-0", "translate-y-2");
        requestAnimationFrame(() => {
          results.classList.remove("opacity-0", "translate-y-2");
          results.classList.add("opacity-100", "translate-y-0");
        });
        progressLabel.textContent = "Assessment Complete";
        progressValue.textContent = "100%";
        progressBar.style.width = "100%";
        transitionBusy = false;
      }, SCAN_DURATION_MS + RESULT_SYNC_MS);
    }

    nextBtn.addEventListener("click", () => {
      if (transitionBusy) {
        return;
      }

      const checked = document.querySelector(`input[name="q-${current}"]:checked`);
      if (!checked) {
        return;
      }

      answers[current] = Number(checked.value);
      if (current === questions.length - 1) {
        runResultsTransition();
        return;
      }

      runQuestionTransition(current + 1);
    });

    prevBtn.addEventListener("click", () => {
      if (transitionBusy) {
        return;
      }

      if (current === 0) {
        return;
      }
      current -= 1;
      renderQuestion();
    });

    retakeBtn.addEventListener("click", () => {
      current = 0;
      answers = new Array(questions.length).fill(null);
      results.classList.add("hidden");
      results.classList.remove("opacity-100", "translate-y-0", "opacity-0", "translate-y-2");
      questionCard.classList.remove("opacity-0", "scale-95");
      syncStatus.classList.add("hidden");
      syncStatus.classList.remove("opacity-100");
      quizForm.classList.remove("hidden");
      transitionBusy = false;
      renderQuestion();
    });

    renderQuestion();
  </script>
</body>
</html>
